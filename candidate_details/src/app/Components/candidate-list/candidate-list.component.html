<!-- Add this in your component HTML file -->
<div class="container-fluid mt-4">
  <div class="row mb-1">
    <div class="col-12 col-md-4 d-flex justify-content-start mb-3 mb-md-0">
      <div class="btn btn-success align-items-center h-75 me-3 uploadDiv">
        <i class="fa-solid fa-upload"></i>
        Upload Excel
        <input
          type="file"
          accept=".xlsx, .xls"
          (change)="onUploadExcelFileChange($event)"
          class="uploadinput"
        />
      </div>
      <div
        class="btn btn-primary align-items-center h-75"
        (click)="openAccCandidateModel()"
      >
        <i class="fa-solid fa-plus me-2"></i> Add Candidate
      </div>
    </div>
    <div class="col-12 col-md-4 d-flex justify-content-center mb-3 mb-md-0">
      <h2>Candidates</h2>
    </div>
    <div class="col-12 col-md-4 d-flex justify-content-end d-none d-md-flex">
      <select
        [(ngModel)]="SearchField"
        (change)="onSearchFieldChange($event)"
        class="form-select h-100 me-2 w-100 w-md-25 magic-input"
      >
        <option value="">Select field...</option>
        <option value="Name">Name</option>
        <option value="Contact_No">Contact No</option>
        <option value="Linkedin_Profile">LinkedIn</option>
        <option value="Email_ID">Email</option>
        <option value="Roles">Roles</option>
        <option value="Experience">Experience</option>
        <option value="Skills">Skills</option>
        <option value="CTC">CTC</option>
        <option value="ETC">ETC</option>
        <option value="Schedule_Interview_status">Status</option>
      </select>
      <input
        type="text"
        placeholder="Search..."
        class="form-control rounded-pill w-100 w-md-75 magic-input"
        id="searchTerm"
        [(ngModel)]="searchTerms"
        (input)="clickToSearchCandidate()"
      />
    </div>
  </div>

  <div class="magical-table-container">
    <table class="table magical-table border">
      <thead class="thead-dark bg-light">
        <tr class="row">
          <th class="col mb-2">
            <span
              (click)="
                clickToSortCandidate(
                  PageNumber,
                  pageSize,
                  'Date',
                  sortDirection,
                  searchTerm,
                  SearchField
                )
              "
            >
              Date
            </span>
          </th>
          <th class="ellipsis-cell col">
            <span
              (click)="
                clickToSortCandidate(
                  PageNumber,
                  pageSize,
                  'Name',
                  sortDirection,
                  searchTerm,
                  SearchField
                )
              "
            >
              Name
            </span>
          </th>
          <th class="ellipsis-cell col">
            <span
              (click)="
                clickToSortCandidate(
                  PageNumber,
                  pageSize,
                  'Contact_No',
                  sortDirection,
                  searchTerm,
                  SearchField
                )
              "
            >
              Contact No
            </span>
          </th>
          <th class="ellipsis-cell col">
            <span
              (click)="
                clickToSortCandidate(
                  PageNumber,
                  pageSize,
                  'LinkedIn_Profile',
                  sortDirection,
                  searchTerm,
                  SearchField
                )
              "
            >
              LinkedIn Profile
            </span>
          </th>
          <th class="ellipsis-cell col">
            <span
              (click)="
                clickToSortCandidate(
                  PageNumber,
                  pageSize,
                  'Email_ID',
                  sortDirection,
                  searchTerm,
                  SearchField
                )
              "
            >
              Email
            </span>
          </th>
          <th class="ellipsis-cell col">
            <span
              (click)="
                clickToSortCandidate(
                  PageNumber,
                  pageSize,
                  'Roles',
                  sortDirection,
                  searchTerm,
                  SearchField
                )
              "
            >
              Role
            </span>
          </th>
          <th class="ellipsis-cell col">
            <span
              (click)="
                clickToSortCandidate(
                  PageNumber,
                  pageSize,
                  'Experience',
                  sortDirection,
                  searchTerm,
                  SearchField
                )
              "
            >
              Experience
            </span>
          </th>
          <th class="ellipsis-cell col">
            <span
              (click)="
                clickToSortCandidate(
                  PageNumber,
                  pageSize,
                  'Skills',
                  sortDirection,
                  searchTerm,
                  SearchField
                )
              "
            >
              Skills
            </span>
          </th>
          <th class="ellipsis-cell col">
            <span
              (click)="
                clickToSortCandidate(
                  PageNumber,
                  pageSize,
                  'CTC',
                  sortDirection,
                  searchTerm,
                  SearchField
                )
              "
            >
              CTC
            </span>
          </th>
          <th class="ellipsis-cell col">
            <span
              (click)="
                clickToSortCandidate(
                  PageNumber,
                  pageSize,
                  'ETC',
                  sortDirection,
                  searchTerm,
                  SearchField
                )
              "
            >
              ETC
            </span>
          </th>
          <th class="ellipsis-cell col">
            <span
              (click)="
                clickToSortCandidate(
                  PageNumber,
                  pageSize,
                  'schedule_Interview_status',
                  sortDirection,
                  searchTerm,
                  SearchField
                )
              "
            >
              Interview Status
            </span>
          </th>
          <th class="ellipsis-cell col">CV</th>
          <th class="ellipsis-cell col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let candidate of candidateList" class="row">
          <td
            (click)="ShowCandidateDetails(candidate)"
            class="ellipsis-cell col"
          >
            {{ candidate.date | date : "shortDate" }}
          </td>
          <td
            (click)="ShowCandidateDetails(candidate)"
            class="ellipsis-cell col"
          >
            {{ candidate.name }}
          </td>
          <td
            (click)="ShowCandidateDetails(candidate)"
            class="ellipsis-cell col"
          >
            {{ candidate.contact_No }}
          </td>
          <td
            (click)="ShowCandidateDetails(candidate)"
            class="ellipsis-cell col"
            [matTooltip]="candidate.linkedin_Profile"
            matTooltipPosition="above"
            [matTooltipClass]="'custom-tooltip'"
          >
            {{ candidate.linkedin_Profile }}
          </td>
          <td
            (click)="ShowCandidateDetails(candidate)"
            class="ellipsis-cell col"
            [matTooltip]="candidate.email_ID"
            matTooltipPosition="above"
            [matTooltipClass]="'custom-tooltip'"
          >
            {{ candidate.email_ID }}
          </td>
          <td
            (click)="ShowCandidateDetails(candidate)"
            class="ellipsis-cell col"
          >
            {{ candidate.roles }}
          </td>
          <td
            (click)="ShowCandidateDetails(candidate)"
            class="ellipsis-cell col"
          >
            {{ candidate.experience }}
          </td>
          <td
            (click)="ShowCandidateDetails(candidate)"
            class="ellipsis-cell col"
            [matTooltip]="candidate.skills"
            matTooltipPosition="above"
            [matTooltipClass]="'custom-tooltip'"
          >
            {{ candidate.skills }}
          </td>
          <td
            (click)="ShowCandidateDetails(candidate)"
            class="ellipsis-cell col"
          >
            {{ candidate.ctc }}
          </td>
          <td
            (click)="ShowCandidateDetails(candidate)"
            class="ellipsis-cell col"
          >
            {{ candidate.etc }}
          </td>
          <td
            (click)="ShowCandidateDetails(candidate)"
            class="ellipsis-cell col"
            [ngClass]="{
              'text-primary': candidate.schedule_Interview_status === 'Good ',
              'text-success':
                candidate.schedule_Interview_status === 'Excellent',
              'text-danger': candidate.schedule_Interview_status === 'Not Good'
            }"
            [matTooltip]="candidate.schedule_Interview_status"
            matTooltipPosition="above"
            [matTooltipClass]="'custom-tooltip'"
          >
            {{ candidate.schedule_Interview_status }}
          </td>
          <td class="ellipsis-cell col">
            <button
              class="text-success rounded-pill border-primary"
              [disabled]="!candidate.cvPath"
              [ngClass]="{
                'text-success border-primary cursorPointer': candidate.cvPath,
                'text-secondary border-secondary cursornotallowed':
                  !candidate.cvPath
              }"
              (click)="downloadCV(candidate.id, candidate.name)"
            >
              <i class="fa-solid fa-download"></i> CV
            </button>
          </td>
          <td class="ellipsis-cell col">
            <i
              class="fas fa-edit text-primary fa-lg me-2 cursorPointer"
              (click)="EditCandidate(candidate)"
            ></i>
            <i
              class="fa fa-trash text-danger fa-lg cursorPointer"
              (click)="deleteCandidate(candidate.id)"
            ></i>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <span
    >Showing {{ firstCandidateOfPage }} to {{ lastCandidateOfPage }} of
    {{ totalcandidates }} candidates.</span
  >

  <!-- Pagination Controls -->
  <nav
    class="float-end me-4 mt-3"
    aria-label="Page navigation example"
    *ngIf="totalpages > 1"
  >
    <ul class="pagination">
      <li class="page-item cursorPointer" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="loadPage(currentPage - 1)">Previous</a>
      </li>
      <li
        *ngFor="let page of getDisplayedPages()"
        class="page-item cursorPointer"
        [class.active]="page === currentPage"
        [class.disabled]="page === '...'"
      >
        <a
          *ngIf="page !== '...'; else ellipsis"
          class="page-link cursor-pointer"
          (click)="loadPage(page)"
          >{{ page }}</a
        >
        <ng-template #ellipsis>
          <span class="page-link">...</span>
        </ng-template>
      </li>
      <li
        class="page-item cursorPointer"
        [class.disabled]="currentPage === totalpages"
      >
        <a class="page-link cursor-pointer" (click)="loadPage(currentPage + 1)"
          >Next</a
        >
      </li>
    </ul>
  </nav>

  <nav class="float-end me-4 mt-3">
    <select
      [(ngModel)]="pageSize"
      (change)="onPageSizeChange($event)"
      class="form-select"
    >
      <option value="15">15</option>
      <option value="20">20</option>
      <option value="50">50</option>
      <option value="100">100</option>
    </select>
  </nav>

  <span class="float-end me-2 mt-4">Select page size </span>

  <ng-template #addCandidate let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">
        {{ CandidateModalHeader }}
      </h4>
      <button
        type="button"
        class="btn btn-close"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      ></button>
    </div>
    <div class="modal-body">
      <app-add-candidate
        [candidateEdit]="clickedCandidateForEdit"
        [addClicked]="addClicked"
        (isclick)="modal.close('Save click')"
      />
    </div>
  </ng-template>
</div>

<!-- Candidate Details -->
<div
  class="card container p-0 mt-5 mb-3 shadow-lg border-0"
  *ngIf="clickedCandidate"
>
  <div class="card-header bg-color text-white text-center">
    <h4 class="mb-0">
      <b><i class="fas fa-user"></i> Candidate Details</b>
    </h4>
  </div>
  <div class="card-body">
    <div class="container-fluid mt-4">
      <div class="row mb-3">
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-calendar-alt"></i> Date:</strong
          >
          <span class="fw-bold all-badge">{{ candidateForDetails.date }}</span>
        </div>
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-user"></i> Name:</strong
          >
          <span class="fw-bold all-badge">{{ candidateForDetails.name }}</span>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-phone"></i> Contact No:</strong
          >
          <span class="fw-bold all-badge text-primary">{{
            candidateForDetails.contact_No
          }}</span>
        </div>
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fab fa-linkedin"></i> LinkedIn:</strong
          >
          <a
            *ngIf="candidateForDetails.linkedin_Profile != null"
            [href]="prepareLinkedInUrl(candidateForDetails.linkedin_Profile)"
            target="_blank"
            class="btn btn-outline-primary btn-sm"
          >
            View Profile <i class="fas fa-external-link-alt"></i>
          </a>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-envelope"></i> Email:</strong
          >
          <span class="fw-bold all-badge text-danger">{{
            candidateForDetails.email_ID
          }}</span>
        </div>
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-briefcase"></i> Role:</strong
          >
          <span class="badge bg-success">{{ candidateForDetails.roles }}</span>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-clock"></i> Experience:</strong
          >
          <span class="fw-bold all-badge"
            >{{ candidateForDetails.experience }} years</span
          >
        </div>
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-tools"></i> Skills:</strong
          >
          <span class="fw-bold text-dark all-badge">
            {{ candidateForDetails.skills }}
          </span>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-money-bill-wave"></i> CTC:</strong
          >
          <span class="fw-bold all-badge text-success">{{
            candidateForDetails.ctc
          }}</span>
        </div>
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-money-bill-wave"></i> ETC:</strong
          >
          <span class="fw-bold all-badge text-success">{{
            candidateForDetails.etc
          }}</span>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fa fa-question-circle"></i> Reason For Job
            Change:</strong
          >
          <span class="fw-bold all-badge">{{
            candidateForDetails.reason_For_Job_Change
          }}</span>
        </div>
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-clock"></i> Notice Period:</strong
          >
          <span class="fw-bold all-badge">{{
            candidateForDetails.notice_Period
          }}</span>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-map-marker-alt"></i> Current Location:</strong
          >
          <span class="fw-bold all-badge">{{
            candidateForDetails.current_Location
          }}</span>
        </div>
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-map-marked-alt"></i> Preferred Location:</strong
          >
          <span class="fw-bold all-badge">{{
            candidateForDetails.prefer_Location
          }}</span>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-calendar-check"></i> Schedule Interview:</strong
          >
          <span class="fw-bold all-badge">{{
            candidateForDetails.schedule_Interview | date : "medium"
          }}</span>
        </div>
        <div class="col-md-6">
          <strong class="text-secondary me-2"
            ><i class="fas fa-tasks"></i> Interview Status:</strong
          >
          <span
            class="fw-bold"
            [ngClass]="{
              'text-success':
                candidateForDetails.schedule_Interview_status === 'Excellent',
              'text-danger':
                candidateForDetails.schedule_Interview_status === 'Not Good',
              'text-warning':
                candidateForDetails.schedule_Interview_status === 'Good '
            }"
          >
            {{ candidateForDetails.schedule_Interview_status }}
          </span>
        </div>
      </div>
      <div class="row mb-3">
        <div class="col-md-12">
          <strong class="text-secondary me-2"
            ><i class="fas fa-comments"></i> Comments:</strong
          >
          <p class="border rounded p-2 bg-light">
            {{ candidateForDetails.comments }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<br />
